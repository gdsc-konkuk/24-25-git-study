## 7.1 Revision Selection (리비전 선택)

- **리비전 하나 가리키기**
  - **SHA-1 줄여 쓰기**  
    SHA-1 해시 값은 40글자나 될 정도로 길기 때문에 전부 외우기는 힘들다. 다행히 앞 몇 글자만 외워도 식별이 가능하다.
  
  - **브랜치로 가리키기**  
    어떤 커밋이 브랜치의 가장 최신 커밋이라면 간단히 브랜치 이름으로 커밋을 가리킬 수 있다. 브랜치 이름을 Git 명령에 전달하면 브랜치가 가리키는 커밋을 가리키게 된다.
  
  - **RefLog로 가리키기**  
    Git은 자동으로 브랜치와 HEAD가 지난 몇 달 동안에 가리켰었던 커밋을 모두 기록하는데 이 로그를 “Reflog” 라고 부른다.  
    `git reflog`를 실행하면 Reflog를 볼 수 있다.
  
  - **계통 관계로 가리키기**  
    계통 관계로도 커밋을 표현할 수 있다. 이름 끝에 `^` (캐럿) 기호를 붙이면 Git은 해당 커밋의 부모를 찾는다.  
    `HEAD^`는 바로 “HEAD의 부모” 를 의미하므로 바로 이전 커밋을 보여준다.  
    계통을 표현하는 방법으로 `~` 라는 것도 있다. `HEAD~`와 `HEAD^`는 똑같이 첫 번째 부모를 가리킨다. 하지만, 그 뒤에 숫자를 사용하면 달라진다. `HEAD~2`는 명령을 실행할 시점의 “첫 번째 부모의 첫 번째 부모”, 즉 “조부모” 를 가리킨다.

- **범위로 커밋 가리키기**  
  커밋을 하나씩 조회할 수도 있지만, 범위를 주고 여러 커밋을 한꺼번에 조회할 수도 있다. 범위를 사용하여 조회할 수 있으면 브랜치를 관리할 때 유용하다.

  - **Double Dot**  
    Double Dot은 어떤 커밋들이 한쪽에는 관련됐고 다른 쪽에는 관련되지 않았는지 Git에게 물어보는 것이다.  
    `A..B`는 A 브랜치에는 없고 B 브랜치에만 있는 것을 알려준다.

  - **세 개 이상의 Refs**  
    Double Dot은 간단하고 유용하지만 두 개 이상의 브랜치에는 사용할 수 없다. Git은 `^`이나 `--not` 옵션 뒤에 브랜치 이름을 넣으면 그 브랜치에 없는 커밋을 찾아준다.
    ```bash
    $ git log refA refB ^refC
    $ git log refA refB --not refC

  - **Triple Dot**
    Triple Dot은 양쪽에 있는 두 Refs 사이에서 공통으로 가지는 것을 제외하고 서로 다른 커밋만 보여준다.

## 7.2 Stashing

`git stash`는 현재 작업 디렉토리에서 수정 중인 파일들을 일시적으로 저장하고, 깨끗한 작업 상태로 되돌아가기 위해 사용됩니다. `stash`는 **Modified** 상태이며 **Tracked** 상태인 파일과 **Staging Area**에 있는 파일들을 보관합니다. 브랜치를 변경해야 할 때 작업 중이던 변경 사항을 스택에 저장해두고 나중에 다시 불러와 적용할 수 있습니다.

---

### 예시

1. 파일을 수정하던 중 브랜치를 변경하고 싶은 상황이 발생합니다.
2. 작업 중인 파일을 커밋하지 않으므로, `stash` 명령어로 임시 저장합니다.
   - `git stash` 또는 `git stash save`를 실행하여 스택에 새로운 stash를 만듭니다.
3. 이제 자유롭게 다른 브랜치로 이동할 수 있으며, 필요할 때 `git stash apply`를 사용해 stash를 다시 적용할 수 있습니다.
   - `git stash apply stash@{2}`처럼 특정 stash를 골라서 적용할 수도 있습니다. 이름을 지정하지 않으면 가장 최근 stash가 적용됩니다.
4. 단, `git stash apply`를 사용해도 이전에 **Staged** 상태였던 파일은 자동으로 **Staged** 상태로 복구되지 않습니다. 원래 상태로 돌아가려면 `--index` 옵션을 사용합니다.

---

### `git stash save` 옵션

- **`--keep-index`**  
  이미 Staging Area에 있는 파일을 stash하지 않고 남겨둡니다.

- **`--include-untracked`**, **`-u`**  
  추적되지 않은 파일(Untracked files)까지 stash에 포함하여 저장합니다.

- **`--patch`**  
  수정된 모든 내용을 stash에 저장하지 않고, 대화형 프롬프트에서 저장할 변경 사항과 제외할 변경 사항을 선택할 수 있습니다.

---

### 주요 `stash` 명령어

- **`git stash push`**
  - `git stash` 또는 `git stash push` 명령어로 변경 사항을 스택에 쌓고, 현재 작업 디렉토리를 깨끗하게 만듭니다.
  - `git stash save "메시지"`처럼 메시지를 추가하여 스택을 구분할 수 있습니다.

- **`git stash apply & pop`**
  - **`git stash apply [stash@{n}]`**: 스택에 저장된 변경 사항을 다시 적용합니다. 인덱스를 지정하지 않으면 최신 stash가 적용됩니다. 스택에 남아 있어 여러 번 적용할 수 있습니다.
  - **`git stash pop [stash@{n}]`**: `apply`와 유사하지만, 적용 후 해당 stash를 스택에서 제거합니다.

- **`git stash drop [stash@{n}]`**
  - 특정 stash를 삭제합니다. `stash@{n}`을 지정하지 않으면 가장 최근 stash가 삭제됩니다.
  - 예시: `git stash drop stash@{1}`

---
